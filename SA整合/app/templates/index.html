{% extends "base.html" %}

{% block title %}我的貼文{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
<link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='post.css') }}">

<h1 class="page-title">我的貼文</h1>

<!-- 新增貼文按鈕 -->
<div class="button-wrapper">
    <a href="{{ url_for('post.new_post') }}" class="sent">新增貼文</a>
</div>

{% for post in posts %}
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">{{ post['title'] }}</h2>
            <p class="card-text">{{ post['content'] }}</p>
            <p class="card-time">
                發佈時間: 
                {{ post['created_at'] if post['created_at'].__class__.__name__ == 'str'
                    else post['created_at'].strftime('%Y-%m-%d %H:%M:%S') }}
            </p>
            <div class="card-buttons">
                <a href="{{ url_for('post.edit_post', post_id=post['post_id']) }}" class="btn-edit">編輯</a>
                <form action="{{ url_for('post.delete_post', post_id=post['post_id']) }}" method="POST" class="d-inline">
                    <input type="hidden" name="next" value="index">
                    <button type="submit" class="btn-delete" onclick="return confirm('確定要刪除這篇文章嗎？')">刪除</button>
                </form>
            </div>
        </div>
    </div>
{% else %}
    <p class="no-posts">目前尚無貼文。</p>
{% endfor %}
{% endblock %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
<style>
.flash-container {
  margin-top: 100px; /* 根據 navbar 高度調整，通常 60~100px */
}

.alert {
  z-index: -1;
  position: relative;
  
}
</style>
